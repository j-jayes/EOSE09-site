{
  "hash": "ea3328b8628dd38fd2ab6dee15b250e8",
  "result": {
    "markdown": "---\ntitle: \"Additional Maps and Data\"\nimage: \"resource_logo_2.png\"\nauthor: \"Jonathan Jayes\"\ndate: 2023-03-29\nexecute: \n  eval: false\n  warning: false\n  message: false\nformat: \n  html:\n    fig-width: 8\n    fig-height: 8\n---\n\n\nIn Lab 2 we will look at mapping growth across space and time.\n\nIn addition to the database that we have used so far, we can introduce more data from Eurostat.\n\nYou can have a look at their nice interactive web-based tool [here or in the iframe below](https://ec.europa.eu/eurostat/cache/RCI/#?vis=nuts2.scitech&lang=en) and download the data in excel format from my Github [here](https://github.com/j-jayes/EOSE09-site/raw/main/resources/adm-resources/regions_illustrated.csv).\n\n\n::: {.cell .column-page}\n\n:::\n\n\nI will download the earliest values from each series and put it up later this week (before January 27), until then, you can get an idea of the data from the link above.\n\nThis is what the data looks like:\n\n\n::: {.cell}\n\n:::\n\n\n## Series\n\n\n::: {.cell}\n\n:::\n\n\n## Plots\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nplot_levels <- function(indicator_in, period_in) {\n  df_map %>%\n    filter(\n      indicator == indicator_in,\n      period == period_in\n    ) %>%\n    ggplot(aes(fill = value, geometry = geometry)) +\n  geom_sf(data = world, aes(geometry = geometry), fill = \"grey\", colour = \"white\") +\n  geom_sf() +\n  coord_sf(xlim = c(-23, 42), ylim = c(35, 70), crs = st_crs(4326)) +\n    scale_fill_viridis_c(labels = scales::number_format()) +\n    labs(fill = indicator_in) +\n    theme(legend.position = \"bottom\") +\n    guides(fill = guide_colourbar(title.position = \"top\", title.hjust = 0.5, barwidth = 20)) +\n    labs(title = indicator_in)\n}\n\nplot_pc <- function(indicator_in, period_in) {\n  stat_domain_in <- df_map %>%\n    filter(\n      indicator == indicator_in,\n      period == period_in\n    ) %>%\n    distinct(stat_domain) %>%\n    pull()\n\n\n  df_map %>%\n    filter(\n      indicator %in% c(indicator_in, \"Population (persons)\"),\n      period == period_in,\n      stat_domain == stat_domain_in\n    ) %>%\n    distinct(region, indicator, value, .keep_all = T) %>%\n    group_by(region) %>%\n    mutate(value_pc = value[indicator == indicator_in] / value[indicator == \"Population (persons)\"]) %>%\n    ggplot(aes(fill = value_pc, geometry = geometry)) +\n  geom_sf(data = world, aes(geometry = geometry), fill = \"grey\", colour = \"white\") +\n  geom_sf() +\n  coord_sf(xlim = c(-23, 42), ylim = c(35, 70), crs = st_crs(4326)) +\n    scale_fill_viridis_c(labels = scales::number_format()) +\n    labs(\n      fill = str_c(indicator_in, \" per capita\"),\n      title = str_c(indicator_in, \" per capita\")\n    ) +\n    theme(legend.position = \"bottom\") +\n    guides(fill = guide_colourbar(title.position = \"top\", title.hjust = 0.5, barwidth = 20))\n}\n\nplot_scatter <- function(indicator_in, period_in) {\n  df_map %>%\n    filter(\n      indicator %in% c(indicator_in, \"Gross domestic product (Euro per inhabitant)\"),\n      period == period_in\n    ) %>%\n    distinct(region, indicator, .keep_all = T) %>%\n    select(-c(stat_domain, year)) %>%\n    pivot_wider(names_from = indicator, values_from = value) %>%\n    mutate(country = fct_lump(country, 10)) %>%\n    ggplot(aes(\n      x = `Gross domestic product (Euro per inhabitant)`,\n      y = .data[[indicator_in]],\n      colour = country\n    )) +\n    geom_point() +\n    geom_smooth(aes(group = 1), se = F) +\n    scale_x_continuous(labels = scales::dollar_format(prefix = \"â‚¬\")) +\n    labs(\n      colour = \"Country\",\n      title = str_c(\"Scatterplot of GDP per capita and\\n\", indicator_in)\n    )\n}\n```\n:::\n\n\n\n:::: {.column-page}\n::: {.panel-tabset}\n\n### Agriculture\n\nWhat can we say about milk production? Look at Switzerland go!\n\n\n::: {.cell}\n\n:::\n\n\nHow about sheep farming? Sheesh have a look at Crete!\n\n\n::: {.cell}\n\n:::\n\n\nThere isn't a super clear relationship between number of cows and GDP per capita. Good news that you can farm in a rich country still!\n\n\n::: {.cell}\n\n:::\n\n\n### Economy\n\nWhy does Turkey have such a low level of employment among women?\n\n\n::: {.cell}\n\n:::\n\n\nIt seems that there is a strong relationship between GDP per capita and the economic activity rate. Can you guess about the direction of causality?\n\n\n::: {.cell}\n\n:::\n\n\nDo we see agglomeration effects with higher GDP per capita in areas with higher population density? Note the logged y axis.\n\n\n::: {.cell}\n\n:::\n\n\n### Education\n\nLook at how well Scandinavia compares to Western Europe in rates of university education among women!\n\n(I don't know why France is mising...)\n\n\n::: {.cell}\n\n:::\n\n\nWho leaves school early? Maybe people in places where formal education is not that enticing?\n\n\n::: {.cell}\n\n:::\n\n\nLook at how the countries separate here - wow!\n\n\n::: {.cell}\n\n:::\n\n\n### Health\n\nSee how few hospital beds Sweden has compared to Norway.\n\n\n::: {.cell}\n\n:::\n\n\nSeems like you have to be a rich country in order to live long enough to die from cancer :(\n\n\n::: {.cell}\n\n:::\n\n\nLook at how the countries separate here - wow!\n\n\n::: {.cell}\n\n:::\n\n\n\n### Population\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\nInteresting demographic trends! You have to be rich enough to have children in a rich country!\n\n\n::: {.cell}\n\n:::\n\n\n\n:::\n::::\n\n\n\n",
    "supporting": [
      "Additional-map-data_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}