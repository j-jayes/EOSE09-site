{
  "hash": "639d9574cc5a266d7a2e4352517a340b",
  "result": {
    "markdown": "---\ntitle: \"By request: dotted lines to indicate a region of interest\"\nformat: html\nexecute: \n  eval: false\n  echo: true\n---\n\n\nI have been asked to show how we can add a dotted line to a map to indicate a particular region of interest.\n\nYou can download the [do file that goes along with this example here](regions-dotted-line-resources/dotted-regions.do).\n\n## Setup\n\nFirst we need to set our working directory and load the data we will be using. We will be using the Roses and Wolf dataset and the NUTS coordinates dataset. These are the same ones that are in the lab 1 folder. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nclear all\nset more off\n\n# Set your own directory here\ncd \"/Users/jonathanjayes/Downloads/Lab-1/\"\n```\n:::\n\n\n##Â Dotted lines around one region\n\nIf we want to indicate one region that we are interested in on the map, we can use the `line` option in the `spmap` command. This will allow us to draw a line around the region we are interested in, and we can customize it to be a dotted line.\n\nIn order to save the coordinates of a specific region, we read in the coordinates file, and then use the `keep` command to keep only the coordinates of the region we are interested in. We then save this as a new file.\n\nThen, we read in the original dataset again, and draw a choropleth map as we did in the previous examples. We then add a line with the `line` command, and customize it somewhat. We also add a caption to explain it. Sadly it is difficult to make another legend in Stata, so we cannot add a coloured legend for the line.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# First we want to keep the coordinates of a region we are interested in\nuse \"nutscoord.dta\", clear\n\n# Here 183 is the ID for Sydsverige, we can find this with the browse command\nkeep if _ID == 183\n\n# Save these coordinates as another file\nsave nutscoord_sydsverige, replace\n\n\n# Using the original dataset again\nuse regional_dataset, clear\n\n# We add a line with the \"line\" command and customize it somewhat\n# We also add a caption to explain it. Sadly it is difficult to make another legend\nspmap regional_gdp_cap_1990 using \"nutscoord.dta\" if year == 1950 ///\n\t& country == \"Sweden\", id(_ID) ///\n\tline(data(\"nutscoord_sydsverige.dta\") size(2) color(red) pattern(shortdash)) ///\n\tfcolor(Blues2) legend(pos(9)) legstyle(2) ///\n\ttitle(\"Regional GDP per capita in Sweden - 1950\", size(medium)) ///\n\tcaption(\"Red dotted line indicates Sydsverige\") ///\n\tosize(0.02 ..) ocolor(white ..) ///\n\tclmethod(custom) clbreaks(5000 (1000) 9000)\n```\n:::\n\n\nThis is what the map looks like:\n\n![](regions-dotted-line-resources/red.jpg)\n\n## Dotted lines around multiple regions\n\nSimilarly, we can add a dotted line around multiple regions. We can do this by keeping the coordinates of multiple regions, and then adding a line for each of them. We can also add a caption to explain it.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Read in the coordinated file\nuse \"nutscoord.dta\", clear\n\n# Here we keep two regions\nkeep if _ID == 161 | _ID == 183\n\n# Save it as another file\nsave nutscoord_stockholm_sydsverige, replace\n\n# Going back to original dataset\nuse regional_dataset, clear\n\nspmap regional_gdp_cap_1990 using \"nutscoord.dta\" if year == 1950 ///\n\t& country == \"Sweden\", id(_ID) ///\n\tline(data(\"nutscoord_stockholm_sydsverige.dta\") size(2) color(green) pattern(shortdash)) ///\n\tfcolor(Blues2) legend(pos(9)) legstyle(2) ///\n\ttitle(\"Regional GDP per capita in Sweden - 1950\", size(medium)) ///\n\tcaption(\"Green dotted line indicates Stockholm and Sydsverige\") ///\n\tosize(0.02 ..) ocolor(white ..) ///\n\tclmethod(custom) clbreaks(5000 (1000) 9000)\n```\n:::\n\n\n![](regions-dotted-line-resources/green.jpg)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}