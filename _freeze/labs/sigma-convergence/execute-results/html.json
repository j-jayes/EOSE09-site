{
  "hash": "9f8ce606b6c4fe7e9b2ea339a13d2526",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Sigma-Convergence\"\nauthor: Jonathan Jayes\ndate: today\nformat:\n  html:\n    code-overflow: wrap\n#   pdf:\n#     documentclass: scrreprt\n#     toc: true\nexecute: \n  eval: false\n  echo: true\nimage: \"Lab-1-resources/preview_exercises.png\"\n---\n\n\n\n\nI received a request to calculate and plot sigma-convergence for Sweden using Stata.\n\nFor a bit of background, from your textbook, the chapter called \"From Empire to Republic\" by Max-Stephan Schulze, we have the following:\n\n> One way to think about regional inequality is in terms of so-called sigma-convergence, i.e. a reduction over time in the dispersion of per capita income (or output) levels across regions (Barro and Sala-i-Martin 1991; Sala-i-Martin 1996). A typical measure of sigma-convergence is the population-weighted coefficient of variation. A decline in the coefficient is indicative of a reduction in regional income dispersion. Figure 3.1.1 shows two alternative measures: one that covers all years in the range and where Lower Austria includes Vienna (CV); the other where Lower Austria and Vienna are treated as separate NUTS 2 units (CV II)\n\n![Figure 3.1.1](Lab-2-resources/sigma-1.png)\n\nWe can calculate the population weighted coefficient of variation as follows in Stata:\n\n## Setup\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclear all\n\n# Set your working directory and read in the data\ncd \"/Users/jonathanjayes/Downloads/Lab-1\"\n\nuse \"regional_dataset\", clear\n \n# Select country of interest\nkeep if country == \"Sweden\"\n# Choose time period\nkeep if year >= 1950\n# xtset tells Stata we will do time series operations\nxtset _ID year\n```\n:::\n\n\n\n\n\n## Calculating the coefficient of variation\n\nThe coefficient of variation is a measure of relative variability. It is calculated as the ratio of the standard deviation to the mean. In this case, we are calculating the coefficient of variation of GDP per capita across regions in Sweden for each year in the dataset since 1950. The formula is:\n\n$$CV_t^w = \\frac{\\sigma_t^{y,w}}{\\overline{y_t^w}}$$\n\nWhere:\n- $CV_t^w$ is the population-weighted coefficient of variation at time $t$\n\n- $\\sigma_t^{y,w} = \\sqrt{\\sum_{i=1}^{N}w_{i,t}(y_{i,t} - \\overline{y_t^w})^2}$ is the population-weighted standard deviation of GDP per capita levels, and\n\n- $\\overline{y_t^w} = \\sum_{i=1}^{N}w_{i,t}y_{i,t}$ is the population-weighted mean GDP per capita\n\nWe can calculate this in Stata using the following code:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# For population-weighted sigma-convergence\n# Step 1: Calculate population weights for each region in each year\nbysort year: egen total_pop_year = sum(regional_population)\ngen pop_weight = regional_population / total_pop_year\n\n# Step 2: Calculate weighted mean GDP per capita for each year\nbysort year: egen w_mean_gdp = sum(regional_gdp_cap_1990 # pop_weight)\n\n# Step 3: Calculate weighted variance and then weighted standard deviation\ngen sq_dev = (regional_gdp_cap_1990 - w_mean_gdp)^2\nbysort year: egen w_var_gdp = sum(sq_dev # pop_weight)\ngen w_sd_gdp = sqrt(w_var_gdp)\n\n# Step 4: Calculate population-weighted coefficient of variation\ngen w_cv_gdp = w_sd_gdp / w_mean_gdp\n```\n:::\n\n\n\n\n## Plotting the coefficient of variation\n\nIt is a stylistic choice to plot the coefficient of variation as a line graph with points, and to add a linear trend line to show the overall trend. This is done with the `twoway` command in Stata. You can also just use a scatter plot and a line of best fit if you prefer.\n\nWhen plotting this over time, a downward trend in w_cv_gdp would indicate sigma-convergence (decreasing inequality), while an upward trend would indicate sigma divergence (increasing inequality).\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Step 5: Create the weighted sigma-convergence plot\ntwoway (connected w_cv_gdp year, lcolor(blue) mcolor(blue) msymbol(circle)) ///\n       (lfit w_cv_gdp year, lcolor(red)) ///\n       , title(\"Population-weighted Sigma-convergence\") subtitle(\"Sweden 1950 - 2015\") ///\n       ytitle(\"Population-weighted CV of GDP per capita\") xtitle(\"Year\") ///\n       legend(label(1 \"Annual weighted CV\") label(2 \"Linear trend\"))\n```\n:::\n\n\n\n\n![](Lab-2-resources/sigma-2.png)\n\n## Compare to unweighted coefficient of variation\n\nFinally, we can compare the population-weighted coefficient of variation to the unweighted coefficient of variation. The unweighted coefficient of variation is calculated in the same way as the weighted version, but without the population weights. We can then plot both measures on the same graph for comparison.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Step 6: Compare weighted and unweighted measures\n# First calculate the unweighted CV as before\nbysort year: egen mean_gdp = mean(regional_gdp_cap_1990)\nbysort year: egen sd_gdp = sd(regional_gdp_cap_1990)\ngen cv_gdp = sd_gdp / mean_gdp\n\n# Then plot both measures for comparison\ntwoway (connected w_cv_gdp year, lcolor(blue) mcolor(blue) msymbol(circle)) ///\n       (connected cv_gdp year, lcolor(red) mcolor(red) msymbol(diamond)) ///\n       , title(\"Sigma-convergence: Weighted vs Unweighted\") subtitle(\"Sweden 1950 - 2015\") ///\n       ytitle(\"Coefficient of variation\") xtitle(\"Year\") ///\n       legend(label(1 \"Population-weighted CV\") label(2 \"Unweighted CV\"))\n```\n:::\n\n\n\n\n\n![](Lab-2-resources/sigma-3.png)\n\n\n## Relationship with Beta Convergence\n\nBeta ($\\beta$) convergence is necessary but not sufficient for sigma-convergence. Mathematically, this relationship can be expressed as:\n\n$$\\sigma_{t+1}^2 = (1-\\beta)^2\\sigma_t^2 + \\sigma_{\\varepsilon}^2$$\n\nWhere:\n- $\\beta$ is the beta convergence coefficient\n- $\\sigma_{\\varepsilon}^2$ is the variance of random shocks\n\nThis equation shows that even with strong beta convergence (high $\\beta$), sigma-convergence may not occur if random shocks ($\\sigma_{\\varepsilon}^2$) are sufficiently large.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}